import{e as R,f as i,u as B,j as D,k as L,c as l,o as n,a as t,b as d,w as y,r as N,t as o,d as u,F as h,h as f,m as S,l as T,_ as $}from"./index-C69pFwWw.js";import{P as j,c as E,g as U}from"./ProductCard-Bf_HPF-d.js";import{f as V,p as A}from"./dataProcess-kQKMuy06.js";import{P as F}from"./ProductQuantityInput-CRiNF9MD.js";const q={class:"container pb-5"},O={"aria-label":"breadcrumb"},z={class:"breadcrumb bg-transparent px-0 py-4"},G={class:"breadcrumb-item"},H={class:"breadcrumb-item"},J={class:"breadcrumb-item active","aria-current":"page"},K={class:"row align-items-start g-5"},M={class:"col-md-7"},W={class:"detail-image-container"},X=["src","alt"],Y={class:"col-md-5"},Z={class:"product-header-box"},tt={class:"badge bg-primary text-dark mb-2 text-uppercase"},et={class:"fw-bold h1 mb-3"},st={class:"price-box mb-4"},at={class:"mb-0 text-neutral"},ot={class:"d-flex justify-content-between"},rt={class:"h2 fw-bold text-primary"},ct={class:"text-neutral"},it={class:"h3 fw-bold text-primary"},lt={class:"stats-box list-unstyled mb-4"},nt={class:"stat-label"},dt={class:"stat-value"},ut={class:"buy-action-box"},pt={class:"row g-2 align-items-center"},_t={class:"col-6"},mt={class:"row my-5"},bt={class:"col-md-8"},vt={class:"about-description"},yt={class:"row row-cols-2 row-cols-md-4 g-4 mt-2 list-unstyled"},ht=R({__name:"ProductDetail",setup(ft){const _=T(),p=i({ability:"",rarity:0,recommend:""}),s=i({id:"",category:"",content:"",description:"",imageUrl:"",imagesUrl:[],is_enabled:0,num:0,origin_price:0,price:0,title:"",unit:""}),m=i([]),g=async()=>{const{id:a}=_.params;try{const e=await E(a);s.value=e.data.product;const{content:c}=e.data.product;p.value=V(c)}catch{alert("取得商品資料錯誤")}},x=async()=>{try{const a=await U(),{products:e}=a.data,c=e.filter(r=>r.id!==s.value.id);m.value=A(c,4)}catch{alert("取得其他商品資料錯誤")}},w=i([{key:"ability",label:"加護能力"},{key:"rarity",label:"稀有度"},{key:"recommend",label:"建議場合"}]),k=a=>a==="rarity"?"★".repeat(p.value.rarity):p.value[a],b=B("productQuantityInputRef");D(()=>_.params.id,async a=>{a&&(await g(),b.value?.initialQty(),x())},{immediate:!0});const P=L(),{addCart:C}=P,v=i(1);function Q(a){v.value=a}function I(){try{C(s.value,v.value),b.value?.initialQty(),alert("加入購物車成功")}catch(a){alert(a instanceof Error?a.message:"加入裝備失敗,請稍後再試")}}return(a,e)=>{const c=N("RouterLink");return n(),l("div",q,[t("nav",O,[t("ol",z,[t("li",G,[d(c,{to:"/"},{default:y(()=>[...e[0]||(e[0]=[u("首頁",-1)])]),_:1})]),t("li",H,[d(c,{to:"/products"},{default:y(()=>[...e[1]||(e[1]=[u("珍品裝備庫",-1)])]),_:1})]),t("li",J,o(s.value.title),1)])]),t("div",K,[t("div",M,[t("div",W,[t("img",{src:s.value.imageUrl,class:"d-block w-100 object-fit-cover",alt:`${s.value.title}-主圖`,style:{"aspect-ratio":"4/3"}},null,8,X)])]),t("div",Y,[t("div",Z,[t("span",tt,o(s.value.category),1),t("h2",et,o(s.value.title),1),t("div",st,[t("p",at,[t("del",null,o(`原價：NT$ ${s.value.origin_price.toLocaleString()}`),1)]),t("div",ot,[t("p",rt,o(`NT$ ${s.value.price.toLocaleString()}`),1),t("p",ct,[e[2]||(e[2]=u(" 剩餘 ",-1)),t("span",it,o(s.value.num),1),u(" "+o(s.value.unit),1)])])]),t("ul",lt,[(n(!0),l(h,null,f(w.value,r=>(n(),l("li",{class:"stat-item",key:r.key},[t("span",nt,o(r.label),1),t("span",dt,o(k(r.key)),1)]))),128))]),t("div",ut,[t("div",pt,[t("div",_t,[d(F,{ref:"productQuantityInputRef","product-nums":s.value.num,"product-id":s.value.id,onEmitQuantity:Q},null,8,["product-nums","product-id"])]),t("div",{class:"col-6"},[t("button",{type:"button",class:"btn btn-primary w-100 py-2 text-uppercase fw-bold",onClick:I}," 加入裝備袋 ")])])])])])]),t("div",mt,[t("div",bt,[e[3]||(e[3]=t("h3",{class:"related-title text-uppercase"},"道具秘辛",-1)),t("p",vt,o(s.value.description),1)])]),e[4]||(e[4]=t("h3",{class:"related-title text-uppercase mt-5"},"猜你想再多看看...",-1)),t("ul",yt,[(n(!0),l(h,null,f(m.value,r=>(n(),l("li",{class:"col",key:r.id},[d(j,S({ref_for:!0},r,{variant:"compact"}),null,16)]))),128))])])}}}),Pt=$(ht,[["__scopeId","data-v-a03f24b1"]]);export{Pt as default};
