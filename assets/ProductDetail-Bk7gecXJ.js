import{e as P,f as i,j as C,c,o as d,a as t,b as m,w as y,r as $,t as l,d as u,F as f,h as g,k as D,v as B,m as L,u as N,_ as R}from"./index-CL-i2lRl.js";import{P as T,c as U,g as V}from"./ProductCard-CsbkU2eK.js";import{f as j,p as I}from"./dataProcess-kQKMuy06.js";const S={class:"container pb-5"},F={"aria-label":"breadcrumb"},Q={class:"breadcrumb bg-transparent px-0 py-3"},q={class:"breadcrumb-item"},A={class:"breadcrumb-item"},E={class:"breadcrumb-item active","aria-current":"page"},M={class:"row align-items-start g-5"},O={class:"col-md-7"},z={class:"detail-image-container"},G=["src","alt"],H={class:"col-md-5"},J={class:"product-header-box"},K={class:"badge bg-primary text-dark mb-2 text-uppercase"},W={class:"fw-bold h1 mb-3"},X={class:"price-box mb-4"},Y={class:"mb-0 text-neutral"},Z={class:"d-flex justify-content-between"},tt={class:"h2 fw-bold text-primary"},st={class:"text-neutral"},et={class:"h3 fw-bold text-primary"},ot={class:"stats-box list-unstyled mb-4"},at={class:"stat-label"},lt={class:"stat-value"},rt={class:"buy-action-box"},nt={class:"row g-2 align-items-center"},it={class:"col-6"},ct={class:"input-group quantity-input-group"},dt=["disabled"],ut=["max"],pt=["disabled"],mt={class:"row my-5"},_t={class:"col-md-8"},bt={class:"about-description"},vt={class:"row row-cols-2 row-cols-md-4 g-4 mt-2 list-unstyled"},yt=P({__name:"ProductDetail",setup(ft){const _=N(),r=i(1),p=i({ability:"",rarity:0,recommend:""}),e=i({id:"",category:"",content:"",description:"",imageUrl:"",imagesUrl:[],is_enabled:0,num:0,origin_price:0,price:0,title:"",unit:""}),b=i([]),h=async()=>{const{id:o}=_.params;try{const s=await U(o);e.value=s.data.product;const{content:n}=s.data.product;p.value=j(n)}catch(s){console.error(s),alert("取得商品資料錯誤")}},x=async()=>{try{const o=await V(),{products:s}=o.data,n=s.filter(a=>a.id!==e.value.id);b.value=I(n,4)}catch(o){console.error(o),alert("取得其他商品資料錯誤")}},w=i([{key:"ability",label:"加護能力"},{key:"rarity",label:"稀有度"},{key:"recommend",label:"建議場合"}]),k=o=>o==="rarity"?"★".repeat(p.value.rarity):p.value[o],v=o=>{o==="plus"?r.value+=1:r.value-=1};return C(()=>_.params.id,async o=>{o&&(await h(),x())},{immediate:!0}),(o,s)=>{const n=$("RouterLink");return d(),c("div",S,[t("nav",F,[t("ol",Q,[t("li",q,[m(n,{to:"/"},{default:y(()=>[...s[3]||(s[3]=[u("首頁",-1)])]),_:1})]),t("li",A,[m(n,{to:"/products"},{default:y(()=>[...s[4]||(s[4]=[u("珍品裝備庫",-1)])]),_:1})]),t("li",E,l(e.value.title),1)])]),t("div",M,[t("div",O,[t("div",z,[t("img",{src:e.value.imageUrl,class:"d-block w-100 object-fit-cover",alt:`${e.value.title}-主圖`,style:{"aspect-ratio":"4/3"}},null,8,G)])]),t("div",H,[t("div",J,[t("span",K,l(e.value.category),1),t("h2",W,l(e.value.title),1),t("div",X,[t("p",Y,[t("del",null,l(`原價：NT$ ${e.value.origin_price.toLocaleString()}`),1)]),t("div",Z,[t("p",tt,l(`NT$ ${e.value.price.toLocaleString()}`),1),t("p",st,[s[5]||(s[5]=u(" 剩餘 ",-1)),t("span",et,l(e.value.num),1),u(" "+l(e.value.unit),1)])])]),t("ul",ot,[(d(!0),c(f,null,g(w.value,a=>(d(),c("li",{class:"stat-item",key:a.key},[t("span",at,l(a.label),1),t("span",lt,l(k(a.key)),1)]))),128))]),t("div",rt,[t("div",nt,[t("div",it,[t("div",ct,[t("button",{class:"btn btn-outline-primary border-end-0",type:"button",disabled:r.value===1,onClick:s[0]||(s[0]=a=>v("minus"))},[...s[6]||(s[6]=[t("i",{class:"fas fa-minus"},null,-1)])],8,dt),D(t("input",{type:"text",class:"form-control text-center shadow-none","onUpdate:modelValue":s[1]||(s[1]=a=>r.value=a),max:e.value.num,readonly:""},null,8,ut),[[B,r.value]]),t("button",{class:"btn btn-outline-primary border-start-0",type:"button",disabled:r.value===e.value.num,onClick:s[2]||(s[2]=a=>v("plus"))},[...s[7]||(s[7]=[t("i",{class:"fas fa-plus"},null,-1)])],8,pt)])]),s[8]||(s[8]=t("div",{class:"col-6"},[t("button",{type:"button",class:"btn btn-primary w-100 py-2 text-uppercase fw-bold"}," 加入裝備袋 ")],-1))])])])])]),t("div",mt,[t("div",_t,[s[9]||(s[9]=t("h3",{class:"related-title text-uppercase"},"道具秘辛",-1)),t("p",bt,l(e.value.description),1)])]),s[10]||(s[10]=t("h3",{class:"related-title text-uppercase mt-5"},"猜你想再多看看...",-1)),t("ul",vt,[(d(!0),c(f,null,g(b.value,a=>(d(),c("li",{class:"col",key:a.id},[m(T,L({ref_for:!0},a,{variant:"compact"}),null,16)]))),128))])])}}}),wt=R(yt,[["__scopeId","data-v-e6372fbd"]]);export{wt as default};
